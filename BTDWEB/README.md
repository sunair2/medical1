# YOLO肿瘤检测和AI分析系统

基于深度学习的智能医学影像分析平台，集成YOLO目标检测和AI智能分析功能。

## 功能特点

- 📈 **YOLO目标检测**: 支持上传自定义YOLO模型进行肿瘤检测
- 🤖 **AI智能分析**: 集成DeepSeek API，提供专业的医学影像分析报告  
- 🎨 **现代化界面**: 响应式设计，支持拖拽上传
- 🔒 **文件验证**: 严格的文件格式和安全验证
- 📊 **结果可视化**: 直观展示检测结果和分析报告

## 系统要求

- Python 3.8+
- 支持GPU加速（可选）
- 网络连接（用于AI分析）

## 安装和使用

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动应用
```bash
# 方法1: 直接运行
python app.py

# 方法2: 使用批处理文件 (Windows)
run.bat
```

### 3. 访问应用
在浏览器中打开: http://localhost:5000

## 使用说明

1. **上传医学影像**: 选择需要检测的医学影像文件（支持JPG、PNG等格式）
2. **选择检测模型**: 上传训练好的YOLO模型文件（.pt格式）
3. **开始检测**: 点击"开始AI智能检测分析"按钮
4. **查看结果**: 系统将显示：
   - 目标检测结果（检测到的对象和置信度）
   - AI智能分析报告（医学意义、风险评估、建议措施等）
   - 标注后的检测结果图像

## 配置说明

### API配置 (config.py)
- 修改 `API_CONFIG` 配置您的API密钥和服务地址
- 调整分析提示词模板以适应不同的检测需求

### 上传配置
- `max_file_size`: 最大文件大小限制
- `allowed_extensions`: 允许的文件格式

## 文件结构

```
BTDWEB/
├── app.py              # Flask主应用
├── config.py           # 配置文件
├── requirements.txt    # 依赖包列表
├── run.bat            # Windows启动脚本
├── README.md          # 说明文档
├── templates/         # HTML模板
│   └── index.html
└── static/           # 静态文件
    ├── uploads/      # 上传的图片
    ├── detections/   # 检测结果图片
    └── models/       # 临时模型文件
```

## 安全注意事项

1. **API密钥安全**: 请妥善保管API密钥，不要提交到公共代码仓库
2. **文件上传**: 系统已实现文件格式验证，但建议在生产环境中添加更多安全措施
3. **临时文件**: 系统会自动清理临时模型文件
4. **医学免责**: AI分析仅供参考，不能替代专业医生诊断

## 技术栈

- **后端**: Flask + YOLO (Ultralytics)
- **前端**: HTML5 + CSS3 + JavaScript
- **AI分析**: DeepSeek API (通过SiliconFlow)
- **图像处理**: Pillow + OpenCV

## 故障排除

### 常见问题

1. **模型加载失败**: 确保上传的是有效的.pt格式YOLO模型文件
2. **AI分析失败**: 检查网络连接和API密钥配置
3. **文件上传失败**: 确认文件格式和大小符合要求

### 调试模式

在 `config.py` 中设置 `FLASK_CONFIG['debug'] = True` 开启调试模式。

## 更新日志

- v1.0.0: 初始版本，支持YOLO检测和AI分析
- 集成DeepSeek API智能分析功能
- 现代化用户界面设计
- 完整的文件验证和错误处理

## 贡献

欢迎提交问题和功能请求！

## 许可证

本项目仅供学习和研究使用。
